# mock-cve-data

### Getting Started

-   `npm install` from the root of the repository will install the needed dependencies
-   In the extensions pane, search for `@recommended`, and install the recommended extensions
    -   All team code linting / formatting will happen upon saving
-   `npm run watch` will spin up the api in watch mode (code changes will refresh)

### Testing

Endpoints are tested with jest and the supertest library. An example is available
in the `app.test.ts` file.

-   `npm run test:watch` will run all `*.test.ts` files in watch mode
-   `npm run view:coverage` will startup a server to serve the coverage report
    for you to view in your browser

### Deployment

Deployment to the azure environment happens manually with the following
commands. (You'll need to be configured to have azure cluster access in advance)

-   First install: `helm install mock-cve-data ./chart -n urban-os-demo-services --create-namespace`
-   Upgrading the api afterwards: `helm upgrade mock-cve-data ./chart -n urban-os-demo-services`

### API Dependencies Note

-   Anything needed by typescript to build (including `@types` packages) need to
    be included in the `dependencies`, not the `devDependencies`. This could be
    changed to be more conventional, but the dockerfile steps would also need
    to be updated. This is because at this time, the docker image performs a
    typescript build in addition to starting the app.
