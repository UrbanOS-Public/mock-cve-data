import { PATH_DATA_DIR } from './configuration';

interface PathPoint {
    lat: number;
    long: number;
    messagebody: any;
}

type Path = PathPoint[];

export class PathData {
    private paths = [] as Path[];
    private pathCount = 0;

    constructor(private pathIDs: string[]) {}

    loadPathData(): Promise<void> {
        const imports = [] as Promise<void>[];
        this.pathIDs.forEach((id) => {
            imports.push(
                import(`${PATH_DATA_DIR}/${id}.json`).then(
                    (pathData: PathPoint[]) => {
                        this.pathCount = this.paths.push(pathData);
                    },
                ),
            );
        });
        return Promise.all(imports).then(() =>
            console.log('debug: paths', this.paths),
        );
    }

    getPointFromPath(pathIndex: number, pointIndex: number): PathPoint {
        return this.paths[pathIndex][pointIndex];
    }
}
