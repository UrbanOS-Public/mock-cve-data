import VehicleManager from './VehicleManager';
import { crashAndResetIntervalMS } from './configuration';
import { CrashType } from './Vehicle';

const crashAndReset = (vehicleManager: VehicleManager) => {
    const crashed = vehicleManager.crashAVehicle(
        CrashType.AutomaticallyTriggered,
    );
    console.log(`Automatic: Crashing ${crashed}`);
    setTimeout(() => {
        console.log(`Automatic: Resetting ${crashed}`);
        vehicleManager.resetVehicles();
        // wait 11 sec due to 10 sec ingestion cadence
    }, 11000);
};

export const kickoffCrashAndReset = (vm: VehicleManager) => {
    setInterval(() => crashAndReset(vm), crashAndResetIntervalMS);
};
