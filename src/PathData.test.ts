import { PATH_DATA_DIR } from './configuration';
import { PathData } from './PathData';

describe('PathData', () => {
    let pathData: PathData;
    const fakeJsonName = 'test_json';
    const fakeJsonData = [{ key: 'one' }, { key: 'two' }];
    beforeEach(async () => {
        jest.resetModules();
        jest.restoreAllMocks();
        jest.mock(`${PATH_DATA_DIR}/${fakeJsonName}.json`, () => fakeJsonData, {
            virtual: true,
        });
        pathData = new PathData([fakeJsonName]);
        await pathData.loadPathData();
    });

    it.only('#getPointFromPath provides the specified point from a specified path', () => {
        expect(pathData.getPointFromPath(0, 1)).toBe(fakeJsonData[1]);
    });

    it("#getPointFromPath throws an error if asking for a path that doesn't exist", () => {
        expect(pathData.getPointFromPath(4, 0)).toThrowError(
            'path 4 out of range',
        );
    });

    it("#getPointFromPath throws an error if asking for a point that doesn't exist", () => {
        expect(pathData.getPointFromPath(0, 3)).toThrowError(
            'point 3 out of range',
        );
    });
});
