import Vehicle from './Vehicle';
import { VEHICLE_MOVEMENT_PERIOD_MS } from './configuration';

export default class VehicleMover {
    constructor(private vehicles: Vehicle[]) {
        if (!this.vehicles || vehicles.length === 0)
            throw Error('VehicleMover constructed with no Vehicles');
    }

    public startMovingVehicles(): void {
        setInterval(() => {
            this.advanceAllVehicles();
        }, VEHICLE_MOVEMENT_PERIOD_MS);
    }

    private advanceAllVehicles(): void {
        this.vehicles.forEach((vehicle) => {
            if (!vehicle.isCrashed()) vehicle.advanceOnPath();
        });
    }
}
